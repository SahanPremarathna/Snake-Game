<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SYN·X — SNAKE</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root[data-theme="dark"] {
  --bg:#020408; --bg2:#05090f; --bg3:#06101e;
  --border:rgba(0,200,255,0.18); --border2:rgba(0,200,255,0.07);
  --glow:rgba(0,200,255,0.55); --glow2:rgba(0,200,255,0.18);
  --accent:#00c8ff; --accent2:#0066ff; --accent3:#00ffaa;
  --text:#c8e8ff; --text2:rgba(160,210,255,0.6); --text3:rgba(160,210,255,0.32);
  --sh:#00ffcc; --sb:#00a8dd; --st:rgba(0,55,90,0.28);
  --fruit:#ff3a6e; --fruit-glow:rgba(255,58,110,0.7);
  --grid-line:rgba(0,90,150,0.13);
  --dead:#ff2244; --dead-glow:rgba(255,34,68,0.45);
  --win:#00ffaa; --win-glow:rgba(0,255,170,0.45);
  --scanline:rgba(0,40,90,0.025); --toggle-bg:rgba(0,200,255,0.08);
}
:root[data-theme="light"] {
  --bg:#eef2fc; --bg2:#e4eaf6; --bg3:#dae3f5;
  --border:rgba(0,100,200,0.22); --border2:rgba(0,100,200,0.09);
  --glow:rgba(0,100,200,0.35); --glow2:rgba(0,100,200,0.1);
  --accent:#005fcc; --accent2:#2244aa; --accent3:#008855;
  --text:#08183a; --text2:rgba(8,30,80,0.6); --text3:rgba(8,30,80,0.35);
  --sh:#005533; --sb:#0055aa; --st:rgba(160,190,230,0.4);
  --fruit:#cc0033; --fruit-glow:rgba(200,0,50,0.45);
  --grid-line:rgba(0,70,150,0.1);
  --dead:#cc0022; --dead-glow:rgba(200,0,34,0.35);
  --win:#005533; --win-glow:rgba(0,85,51,0.35);
  --scanline:rgba(0,40,120,0.018); --toggle-bg:rgba(0,100,200,0.07);
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:100%;overflow:hidden;
  background:var(--bg);color:var(--text);
  font-family:'Share Tech Mono',monospace;
  transition:background .4s,color .4s}

body::before{content:'';position:fixed;inset:0;z-index:0;pointer-events:none;
  background:
    radial-gradient(ellipse 80% 55% at 15% 8%,rgba(0,100,255,0.07) 0%,transparent 60%),
    radial-gradient(ellipse 55% 75% at 85% 92%,rgba(0,200,140,0.05) 0%,transparent 60%);}
body::after{content:'';position:fixed;inset:0;z-index:0;pointer-events:none;
  background:repeating-linear-gradient(0deg,var(--scanline) 0px,var(--scanline) 1px,transparent 1px,transparent 4px);}

.container{position:relative;z-index:1;width:100%;height:100%;
  display:block;padding:0}

.header{display:flex;align-items:center;justify-content:space-between;
  position:fixed;top:12px;left:12px;right:12px;z-index:12}
.logo{font-family:'Orbitron',sans-serif;font-weight:900;
  font-size:clamp(.9rem,2.2vw,1.3rem);letter-spacing:.35em;
  color:var(--accent);text-shadow:0 0 18px var(--glow),0 0 40px var(--glow2);
  position:relative}
.logo::after{content:'';position:absolute;bottom:-3px;left:0;width:100%;height:1px;
  background:linear-gradient(90deg,var(--accent),transparent)}
.logo span{color:var(--text);text-shadow:none}

.theme-toggle{background:var(--toggle-bg);border:1px solid var(--border);
  border-radius:40px;padding:5px 12px;cursor:pointer;
  display:flex;align-items:center;gap:7px;color:var(--text2);
  font-family:'Share Tech Mono',monospace;font-size:.65rem;letter-spacing:.08em;
  transition:all .3s;position:relative;overflow:hidden}
.theme-toggle::before{content:'';position:absolute;inset:0;
  background:linear-gradient(90deg,var(--glow2),transparent);opacity:0;transition:opacity .3s}
.theme-toggle:hover{border-color:var(--accent);color:var(--accent)}
.theme-toggle:hover::before{opacity:1}

.score-panel{display:flex;align-items:stretch;justify-content:space-between;
  position:fixed;top:54px;left:12px;right:12px;z-index:12;gap:6px}
.stat-cell{flex:1;background:rgba(0,0,0,0.12);border:1px solid var(--border2);
  border-radius:5px;padding:6px 12px;display:flex;flex-direction:column;
  position:relative;overflow:hidden;transition:border-color .3s}
[data-theme="light"] .stat-cell{background:rgba(255,255,255,0.3)}
.stat-cell::before{content:'';position:absolute;top:0;left:0;
  width:2px;height:100%;background:var(--accent);opacity:.5}
.stat-label{font-size:.52rem;letter-spacing:.18em;color:var(--text3);
  text-transform:uppercase;margin-bottom:1px}
.stat-value{font-family:'Orbitron',sans-serif;
  font-size:clamp(.8rem,1.8vw,1rem);font-weight:700;
  color:var(--accent);text-shadow:0 0 8px var(--glow2);transition:all .15s}
.stat-value.pulse{animation:sPulse .28s ease}
@keyframes sPulse{0%{transform:scale(1)}50%{transform:scale(1.28);
  color:var(--accent3);text-shadow:0 0 18px var(--glow)}100%{transform:scale(1)}}

.diff-row{display:flex;align-items:center;gap:7px;
  position:fixed;top:106px;left:12px;z-index:12}
.diff-label{font-size:.54rem;letter-spacing:.15em;color:var(--text3)}
.diff-btn{background:transparent;border:1px solid var(--border2);
  border-radius:3px;padding:4px 11px;cursor:pointer;
  font-family:'Share Tech Mono',monospace;font-size:.58rem;letter-spacing:.1em;
  color:var(--text2);transition:all .22s;position:relative;overflow:hidden}
.diff-btn:hover{color:var(--accent);border-color:var(--accent)}
.diff-btn.active{border-color:var(--accent);color:var(--bg);
  background:var(--accent)}
[data-theme="light"] .diff-btn.active{color:#fff}

.status-bar{display:flex;align-items:center;gap:7px;
  position:fixed;top:138px;left:12px;z-index:12}
.status-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0;
  background:var(--accent3);box-shadow:0 0 7px var(--accent3);
  animation:blink 1.4s ease-in-out infinite}
.status-dot.dead{background:var(--dead);box-shadow:0 0 7px var(--dead);animation:none}
.status-dot.win{background:var(--win);box-shadow:0 0 7px var(--win);animation:none}
.status-dot.paused{background:var(--accent);box-shadow:0 0 7px var(--accent);animation:none}
.status-dot.idle{background:var(--text3);box-shadow:none;animation:none}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.25}}
.status-text{font-size:.6rem;letter-spacing:.13em;color:var(--text2)}

.canvas-wrapper{position:fixed;left:0;right:0;top:0;bottom:0;max-width:none;flex:none;touch-action:none}
.corner{position:absolute;width:16px;height:16px;z-index:2;pointer-events:none}
.corner::before,.corner::after{content:'';position:absolute;
  background:var(--accent);box-shadow:0 0 7px var(--glow);transition:background .4s}
.corner::before{width:2px;height:100%}
.corner::after{width:100%;height:2px}
.corner.tl{top:0;left:0}
.corner.tr{top:0;right:0}.corner.tr::before{left:auto;right:0}
.corner.bl{bottom:0;left:0}.corner.bl::before,.corner.bl::after{top:auto;bottom:0}
.corner.br{bottom:0;right:0}.corner.br::before{left:auto;right:0;top:auto;bottom:0}.corner.br::after{top:auto;bottom:0}

canvas{display:block;width:100%;height:100%;background:var(--bg3);transition:background .4s;touch-action:none}

.overlay{position:absolute;inset:0;z-index:10;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  background:rgba(2,4,8,.88);backdrop-filter:blur(8px);gap:14px;
  opacity:0;pointer-events:none;transition:opacity .35s}
[data-theme="light"] .overlay{background:rgba(220,232,255,.9)}
.overlay.visible{opacity:1;pointer-events:all}

.overlay-title{font-family:'Orbitron',sans-serif;
  font-size:clamp(1.2rem,3.5vw,1.8rem);font-weight:900;
  letter-spacing:.28em;text-transform:uppercase;
  text-shadow:0 0 28px var(--glow);color:var(--accent)}
.overlay-title.dead-title{color:var(--dead);text-shadow:0 0 28px var(--dead-glow)}
.overlay-title.win-title{color:var(--win);text-shadow:0 0 28px var(--win-glow)}
.overlay-sub{font-size:.65rem;letter-spacing:.18em;color:var(--text2);
  text-align:center;line-height:1.9;max-width:78%}
.overlay-score{font-family:'Orbitron',sans-serif;
  font-size:clamp(1.6rem,4.5vw,2.4rem);font-weight:900;
  color:var(--accent3);text-shadow:0 0 18px var(--glow)}
.btn{background:transparent;border:1px solid var(--accent);color:var(--accent);
  font-family:'Orbitron',sans-serif;font-size:.65rem;letter-spacing:.18em;
  padding:10px 28px;cursor:pointer;border-radius:4px;transition:all .3s;
  position:relative;overflow:hidden}
.btn::before{content:'';position:absolute;inset:0;background:var(--accent);
  opacity:0;transition:opacity .3s;z-index:-1}
.btn:hover{color:var(--bg)}.btn:hover::before{opacity:1}
.btn:active{transform:scale(.97)}
[data-theme="light"] .btn:hover{color:#fff}

.progress-wrap{position:fixed;left:12px;right:12px;bottom:36px;
  height:2px;background:var(--border2);z-index:12}
.progress-bar{height:100%;
  background:linear-gradient(90deg,var(--accent2),var(--accent),var(--accent3));
  box-shadow:0 0 7px var(--glow);transition:width .3s ease;position:relative}
.progress-bar::after{content:'';position:absolute;right:0;top:50%;
  transform:translate(50%,-50%);width:5px;height:5px;border-radius:50%;
  background:var(--accent);box-shadow:0 0 9px var(--glow)}
.progress-label{position:absolute;right:0;top:-15px;
  font-size:.52rem;color:var(--text3);letter-spacing:.09em}

.controls-hint{display:flex;gap:18px;position:fixed;left:12px;bottom:10px;
  z-index:12;flex-wrap:wrap}
.key-group{display:flex;align-items:center;gap:5px}
.key{display:inline-flex;align-items:center;justify-content:center;
  width:20px;height:20px;border:1px solid var(--border);border-radius:3px;
  font-size:.5rem;color:var(--text3);background:rgba(0,0,0,0.12)}
[data-theme="light"] .key{background:rgba(255,255,255,0.4)}
.key-label{font-size:.52rem;color:var(--text3);letter-spacing:.07em}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="logo">SYN<span>·</span>X</div>
    <button class="theme-toggle" id="themeToggle">
      <span id="toggleIcon">☀</span>
      <span id="toggleLabel">LIGHT MODE</span>
    </button>
  </div>

  <div class="score-panel">
    <div class="stat-cell"><div class="stat-label">Score</div><div class="stat-value" id="scoreVal">0</div></div>
    <div class="stat-cell"><div class="stat-label">Length</div><div class="stat-value" id="lengthVal">1</div></div>
    <div class="stat-cell"><div class="stat-label">Level</div><div class="stat-value" id="levelVal">01</div></div>
    <div class="stat-cell"><div class="stat-label">Best</div><div class="stat-value" id="hiVal">0</div></div>
  </div>

  <div class="diff-row">
    <span class="diff-label">DIFFICULTY:</span>
    <button class="diff-btn active" data-diff="easy">EASY</button>
    <button class="diff-btn" data-diff="normal">NORMAL</button>
    <button class="diff-btn" data-diff="hard">HARD</button>
    <button class="diff-btn" data-diff="insane">INSANE</button>
  </div>

  <div class="status-bar">
    <div class="status-dot idle" id="statusDot"></div>
    <span class="status-text" id="statusText">READY — SELECT DIFFICULTY & PRESS ANY DIRECTION</span>
  </div>

  <div class="canvas-wrapper" id="canvasWrapper">
    <div class="corner tl"></div><div class="corner tr"></div>
    <div class="corner bl"></div><div class="corner br"></div>
    <canvas id="gameCanvas"></canvas>

    <div class="overlay visible" id="startOverlay">
      <div class="overlay-title">SYN·X SNAKE</div>
      <div class="overlay-sub">NAVIGATE THE GRID<br>CONSUME THE ANOMALIES<br>REACH SINGULARITY TO WIN</div>
      <button class="btn" id="startBtn">INITIALIZE</button>
    </div>
    <div class="overlay" id="deadOverlay">
      <div class="overlay-title dead-title">SYSTEM FAILURE</div>
      <div class="overlay-sub">FINAL SCORE</div>
      <div class="overlay-score" id="deadScore">0</div>
      <button class="btn" id="restartBtn">REBOOT</button>
    </div>
    <div class="overlay" id="winOverlay">
      <div class="overlay-title win-title">SINGULARITY</div>
      <div class="overlay-sub">MAXIMUM DENSITY ACHIEVED</div>
      <div class="overlay-score" id="winScore">0</div>
      <button class="btn" id="winRestartBtn">RESET MATRIX</button>
    </div>
    <div class="overlay" id="pauseOverlay">
      <div class="overlay-title">SUSPENDED</div>
      <div class="overlay-sub">PRESS P OR SPACE TO RESUME</div>
    </div>
  </div>

  <div class="progress-wrap">
    <span class="progress-label" id="progLabel">0%</span>
    <div class="progress-bar" id="progressBar" style="width:0%"></div>
  </div>

  <div class="controls-hint">
    <div class="key-group">
      <div class="key">W</div><div class="key">A</div><div class="key">S</div><div class="key">D</div>
      <span class="key-label">/ ARROWS — MOVE</span>
    </div>
    <div class="key-group"><div class="key">P</div><span class="key-label">/ SPACE — PAUSE</span></div>
  </div>
</div>

<script type="module" src="js/main.js"></script>
</body>
</html>
